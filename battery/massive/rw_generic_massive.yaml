apiVersion: benchmarking.taikun.cloud/v1
kind: PVCBenchmark
metadata:
  name: rw_generic_scale_test
  namespace: pvc-bench-operator-system
spec:
  pvc:
    size: 50Gi        # pvc size for every pod
    accessMode: ReadWriteOnce
  test:
    tool: fio
    duration: "60s"   # duration of test
    parameters:
      rw: rw       # write, read, randread, randwrite, randrw, rw
      rwmixread: 70
      bs: 128k          # 4k, 16k, 1m
      size: 49Gi       # size of test file
      ioengine: libaio
      ramp_time: "5" # warm-up before test
      direct: "1"     # disables filesystem caching for a more direct test of the storage
      buffered: "0"   # enables filesystem caching if you want to test the effects of cache
      invalidate: "1" # ensures that the cache is invalidated before starting the test
      numjobs: "8"    # how many jobs run in parallel in every pod
      iodepth: "32"    # number of I/O operations queued at once 
  scale:
    pvc_count: 300
